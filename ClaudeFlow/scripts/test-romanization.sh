#!/bin/bash

# ãƒ­ãƒ¼ãƒå­—å¤‰æ›ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ

# ã‚«ãƒ©ãƒ¼å®šç¾©
GREEN='\033[0;32m'
YELLOW='\033[0;33m'
RED='\033[0;31m'
CYAN='\033[0;36m'
NC='\033[0m' # No Color

# å…±é€šé–¢æ•°ã‚’èª­ã¿è¾¼ã‚€
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
source "$SCRIPT_DIR/common-functions.sh"

echo -e "${CYAN}=== ãƒ­ãƒ¼ãƒå­—å¤‰æ›ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆ ===${NC}"
echo ""

# ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
test_cases=(
    "ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒãƒªã‚ª"
    "ãƒ‰ãƒ©ã‚´ãƒ³ã‚¯ã‚¨ã‚¹ãƒˆ"
    "ãƒã‚±ãƒ¢ãƒ³"
    "ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³"
    "ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒ³ãƒ¡ãƒ³ãƒˆ"
    "ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼"
    "ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆ"
    "ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°"
    "ãƒ‡ã‚¶ã‚¤ãƒ³"
    "ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°"
    "ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³"
    "ã‚¢ãƒ‰ãƒ™ãƒ³ãƒãƒ£ãƒ¼"
    "ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼"
    "ã‚µã‚¤ã‚¨ãƒ³ã‚¹"
    "ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°"
    "ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹"
    "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£"
    "ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯"
    "ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ "
    "ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯"
    "ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—"
    "ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰"
    "ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰"
    "ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"
    "ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³"
    "ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹"
    "ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹"
    "ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£"
    "ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£"
    "ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹"
)

echo -e "${BLUE}æ—¢å­˜ã®ãƒãƒƒãƒ”ãƒ³ã‚°ãƒ†ã‚¹ãƒˆ:${NC}"
# æ—¢å­˜ã®ãƒãƒƒãƒ”ãƒ³ã‚°ãŒã‚ã‚‹ã‚±ãƒ¼ã‚¹
existing_mappings=(
    "ã‚ªã‚»ãƒ­"
    "é­šé‡£ã‚Š"
    "ãƒœãƒ¼ãƒªãƒ³ã‚°"
    "ãƒ†ãƒˆãƒªã‚¹"
    "è¨ˆç®—æ©Ÿ"
    "ãƒ¡ãƒ¢å¸³"
    "ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼"
    "ãƒãƒ£ãƒƒãƒˆ"
    "ã‚²ãƒ¼ãƒ "
    "ã‚¢ãƒ—ãƒª"
)

for test_name in "${existing_mappings[@]}"; do
    result=$(extract_project_name "" "test" "$test_name")
    echo -e "  \"$test_name\" â†’ ${GREEN}\"$result\"${NC}"
done

echo ""
echo -e "${BLUE}ãƒ­ãƒ¼ãƒå­—å¤‰æ›ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆ:${NC}"

# Python3ãŒåˆ©ç”¨å¯èƒ½ã‹ãƒã‚§ãƒƒã‚¯
if command -v python3 >/dev/null 2>&1; then
    echo -e "${GREEN}âœ“ Python3ãŒåˆ©ç”¨å¯èƒ½ã§ã™${NC}"
else
    echo -e "${YELLOW}âš  Python3ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚åŸºæœ¬çš„ãªsedå¤‰æ›ã®ã¿ä½¿ç”¨ã•ã‚Œã¾ã™${NC}"
fi
echo ""

# ãƒ­ãƒ¼ãƒå­—å¤‰æ›ã®ãƒ†ã‚¹ãƒˆ
for test_name in "${test_cases[@]}"; do
    result=$(extract_project_name "" "test" "$test_name")
    echo -e "  \"$test_name\" â†’ ${CYAN}\"$result\"${NC}"
done

echo ""
echo -e "${BLUE}ç‰¹æ®Šãªã‚±ãƒ¼ã‚¹ã®ãƒ†ã‚¹ãƒˆ:${NC}"

# ç‰¹æ®Šãªã‚±ãƒ¼ã‚¹
special_cases=(
    "ã‚ã„ã†ãˆãŠ"
    "ã‹ããã‘ã“"
    "ã²ã‚‰ãŒãªãƒ†ã‚¹ãƒˆ"
    "ã‚«ã‚¿ã‚«ãƒŠãƒ†ã‚¹ãƒˆ"
    "æ··åˆãƒ†ã‚¹ãƒˆMixed"
    "123æ•°å­—å…¥ã‚Š"
    "ã‚¹ãƒšãƒ¼ã‚¹ å…¥ã‚Š"
    "ãƒã‚¤ãƒ•ãƒ³-å…¥ã‚Š"
    "ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢_å…¥ã‚Š"
    "è¨˜å·ï¼ï¼ƒï¼„ï¼…"
    "æ¼¢å­—å¤ªéƒ"
    "ğŸ®çµµæ–‡å­—å…¥ã‚Š"
)

for test_name in "${special_cases[@]}"; do
    result=$(extract_project_name "" "test" "$test_name")
    echo -e "  \"$test_name\" â†’ ${YELLOW}\"$result\"${NC}"
done

echo ""
echo -e "${CYAN}=== ãƒ†ã‚¹ãƒˆå®Œäº† ===${NC}"
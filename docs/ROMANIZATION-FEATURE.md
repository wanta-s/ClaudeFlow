# ローマ字変換フォールバック機能

## 📋 概要

ClaudeFlowのフォルダ名生成機能に、日本語のローマ字変換フォールバックを実装しました。これにより、マッピング辞書に登録されていない日本語も適切な英語フォルダ名に変換されます。

## 🚀 機能の動作

### 1. 変換の優先順位

1. **既存マッピング優先** - 56個の登録済み単語は直接変換
2. **Python3によるローマ字変換** - ひらがな・カタカナを正確に変換
3. **Sedによる基本変換** - Python3が使えない環境用のフォールバック

### 2. 実装内容

#### Python3による変換（推奨）

```python
# ひらがな→ローマ字変換テーブル
hiragana_to_romaji = {
    'あ': 'a', 'い': 'i', 'う': 'u', 'え': 'e', 'お': 'o',
    'か': 'ka', 'き': 'ki', 'く': 'ku', 'け': 'ke', 'こ': 'ko',
    # ... 全ひらがな対応
}

# カタカナ→ひらがな→ローマ字の変換処理
```

#### Sedによる基本変換

```bash
# カタカナの基本的な変換のみ
sed 's/ア/a/g;s/イ/i/g;s/ウ/u/g;s/エ/e/g;s/オ/o/g'
# ... 基本的なカタカナのみ対応
```

## 📊 変換例

### 既存マッピング（56単語）

| 日本語 | 英語フォルダ名 |
|--------|---------------|
| オセロ | othello-app |
| 魚釣り | fishing-app |
| ボーリング | bowling-app |
| 計算機 | calculator-app |
| チャット | chat-app |

### ローマ字変換フォールバック

| 日本語 | 変換結果 |
|--------|----------|
| スーパーマリオ | su-pa-mario-app |
| ドラゴンクエスト | doragonkuesuto-app |
| ポケモン | pokemon-app |
| アニメーション | anime-shon-app |
| プログラミング | puroguramingu-app |

### 特殊ケース

| 入力 | 変換結果 | 説明 |
|------|----------|------|
| ひらがなテスト | hiragana-tesuto-app | 混在OK |
| カタカナテスト | katakana-tesuto-app | 混在OK |
| 混合テストMixed | tesuto-mixed-app | 英数字保持 |
| 123数字入り | 123-app | 数字保持 |
| 漢字太郎 | app-20250116-123456 | 漢字は時刻フォールバック |

## 🔧 技術詳細

### 日本語検出

```bash
if echo "$english_name" | grep -q '[ぁ-んァ-ヶー一-龠]'; then
    # 日本語が含まれている場合の処理
fi
```

### 文字範囲

- ひらがな: `ぁ-ん`
- カタカナ: `ァ-ヶ`
- 長音符: `ー`
- 漢字: `一-龠`

### ケバブケース変換

最終的に以下の処理でケバブケースに変換：

1. スペースをハイフンに置換
2. 英数字とハイフン以外を削除
3. 連続ハイフンを単一に
4. 先頭末尾のハイフンを削除
5. 大文字を小文字に変換

## 🎯 利点

1. **完全な日本語対応** - どんな日本語アプリ名でも英語フォルダ名に変換
2. **既存機能との互換性** - 登録済み単語は高速な直接変換を維持
3. **環境非依存** - Python3がない環境でも基本的な変換は動作
4. **一意性の確保** - 変換失敗時はタイムスタンプで一意性を保証

## 📝 使用方法

```bash
# ultra-light.sh実行時
./ultra-light.sh
# アプリ名を入力してください: スーパーマリオ
# → /implementation/su-pa-mario-app/ が作成される

# 関数の直接呼び出し
extract_project_name "" "default" "ポケモン"
# → pokemon-app
```

## ⚠️ 制限事項

1. **漢字は変換不可** - タイムスタンプ付きフォールバック名を使用
2. **複雑な読み** - 「は」→"wa"/"ha"のような文脈依存の読みは未対応
3. **特殊文字** - 絵文字や記号は削除される

## 🔮 今後の改善案

1. **漢字読み対応** - 漢字の読み仮名辞書の追加
2. **文脈依存読み** - より正確な日本語→ローマ字変換
3. **ユーザー辞書** - カスタム変換ルールの追加機能

---

**実装日**: 2025-01-16  
**実装者**: Claude Code  
**バージョン**: 1.0